{% extends '@EasyAdmin/layout.html.twig' %}

{% block body_id 'dify-chat' %}

{% block main %}


    {% if not app.user %}
        <div class="alert alert-info">
            <h5>需要登录</h5>
            <p>请先登录后才能使用聊天功能。</p>
            <a href="{{ path('app_login') }}" class="btn btn-primary">去登录</a>
        </div>
    {% elseif processedIframeCode %}
        <div id="dify-chat-container" style="height: calc(100vh - 200px); width: 100%;">
            {{ processedIframeCode|raw }}
        </div>
    {% else %}
        <div class="alert alert-warning">
            <h5>聊天配置未找到</h5>
            <p>请确保已配置 Dify 设置并添加了 iframe 嵌入代码。</p>
            <a href="{{ path('admin_dify_app_index') }}" class="btn btn-primary">去配置</a>
        </div>
    {% endif %}
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <style>
        #dify-chat-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
{% endblock %}

