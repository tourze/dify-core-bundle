services:
  # default configuration for services in *this* file
  _defaults:
    autowire: true      # Automatically injects dependencies in your services.
    autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.
    public: true

  Tourze\DifyCoreBundle\DataFixtures\:
    resource: '../../DataFixtures/'
    tags: ['doctrine.fixture.orm']

  # Test environment: MockHttpClient for network isolation
  test.dify_core.MockHttpClient:
    class: Symfony\Component\HttpClient\MockHttpClient
    public: true

  # Test alias for MockHttpClient class
  Test.MockHttpClient:
    alias: test.dify_core.MockHttpClient
    public: true

  # Test alias for HttpClientInterface
  Test.HttpClientInterface:
    alias: test.dify_core.MockHttpClient
    public: true

  # Test service for DifyApiClient with MockHttpClient
  Test.DifyApiClient:
    class: Tourze\DifyCoreBundle\Service\DifyApiClient
    arguments:
      $httpClient: '@test.dify_core.MockHttpClient'
    public: true